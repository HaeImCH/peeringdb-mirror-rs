name = "peeringdb-mirror"
main = "build/worker/shim.mjs"
compatibility_date = "2024-04-01"
compatibility_flags = ["nodejs_compat"]

[build]
# Use upstream worker-build matching workers-rs 0.7.x
command = "cargo install -q worker-build --version 0.7.2 --locked && worker-build --release"

[triggers]
crons = ["0 */3 * * *"] # run sync every 3 hours

[[d1_databases]]
binding = "PEERINGDB"
database_name = "peeringdb-mirror"
database_id = "YOUR_D1_DATABASE_ID" # run: wrangler d1 create peeringdb-mirror
